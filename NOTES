   
image editing:
+ crop
+ resize
+ rotate
- save in jpg, gif, png
+ different quality (jpg, png)
- color background during rotation
- contrasto (contrast, level)
- revert
- mirror (flip)
- monochrome
- trasparent
- blur
- sharp
advanced:
- watermark
- montage
- border


what you should see:
- different containers (vocabularies)
- for every container define:
  - which thumb is shown (random, last, most seen, exact number, none)
  - thumb order (alpha, most seen, most commented, time, vote)
  - how many rows/cols in table; this also defines number of thumbs per page
  - weight of the container in main page
  + max kbytes and size of images
  + thumb size
  - thumb format
  - preview size
  - preview format
  + format name of thumbs
  - locations of +thumbs, previews, +full images
+ in admin I choose which vocabulary is used as navigation
- while browsing, use other terms as filters
- first page with containers; optional, latest addictions and random images
- second page with thumbs (and browsing)
- third with node; optional: preview, an image between thumb and full size; this can be chosen in admin
- permissions: edit container properties, edit image

(* = urgent; + = done)

- should be both a way to have galleries AND a repository for the cms
+ galleries should be based on taxonomy, possibly supporting hierarchy
- other terms in taxonomy could define more metadata, but picture.module should also
have textfields meta data such as name, description, "other keywords", ??
- picture upload
  + form upload
  + directory
  - zip
  - site mirroring
+ use imagemagick for thumbnails
- imagemagick seems to support movies too (skeptic, how could read quicktime or divx without codec?)
+ basic editing (thumbs, rotate, resize, crop)
- to crop use gallery applet
+ admins should be able to add, mode, del images (most done as normal nodes)
+ order images (weight?)
- image mirroring (as gallery, have images on other sites)
- look at gallery remote, be compatible with?
+ have meaningful errors to explain permissions for files; command to check permissions
+ exif and IPTC headers (exif_read_data from php 4.2, or http://www.sentex.net/~mwandel/jhead/index.html and code from gallery::view_photo_properties.php; iptcparse from php4)
- image revisions (heavy)
+ make a imagemagick module which is compatible with the upcoming php extension, but uses system()
+ don't use imagemagick module, make a function and call that directly; in general settings define location of convert
*- filter to add images in text (like trip_image)
- a sort of dialog to choose an image in the repository and add it to the text? integrate this with some sort of extended textarea
*- api to help other modules to support images. for ex a module could want to have
an image submitted (like events, profile); temp upload, preview, cron to delete existing files ecc; see gerhard's post in ml
+ let a user edit his own pictures; personal picture gallery
+ have a cron delete temp images
- change die() in trigger_error()
- send postcard (dedicated module)
- images could have a property: public (in galleries), personal (in personal gallery), private (exists but does not appear any gallery)
- blocks: last image, random image
- large blocks: last images, random images
+ save iptc and exif data; load them in node data
*- permission to edit (rotate, resize etc) images; can give too much power to a user (imagine uploading a large image and keeping on rotating it)
- paging in photo galleries
- integrate history (new photo)
- browse bar in node view (next, prev, up and controls like filter, order etc)
- other thumb orders: size (width x height), filesize, format, number of comments, last comment, some sort of algorithm to see what are most discussed images
- implement search (not needed, I think)
- personal photo gallery "white pages"
- limit personal gallery size (number and kb)
+ complete permission check
- as additional security, you should disallow php and cgi execution in image directories
- xhtml
- shadow to thumbs?
- recreate thumbs
- in the browsers, an "up" command

security:
+ verify file extension and format; change blanks to underscores
+ check format of image edit: size should be just numbers, etc; use escapeshellcmd

general options:
- option to disable convert
+ convert path
+ temp dir
- default options for every container; you can override these options in admin
- hashing of images (mask.jpg -> m/a/s/mask.jpg)
+ flag to add a random value attached to image path, to avoid caching


CREATE TABLE image (
nid int unsigned not null,
image_path varchar(255) not null,
thumb_path varchar(255) not null,
previewpath varchar(255) not null,
format varchar(255) not null,
width int unsigned not null,
height int unsigned not null,
filesize int unsigned not null,
iptc text,
exif text,
personal tinyint not null,
weight tinyint not null
)

add:
- format?
- size (x, y, kb)
- personal
- weight
- iptc
- exif


BUGS:
- editing an image is a bit weird: you must preview before submitting, only previewed changes are saved

TODO (+ = done):
+ clean code
+ check queries, too many?
+ in photo gallery, incorrect number of images reported
+ filter
+ permission to edit with convert
+ support teaser
+ limit personal images
+ image count should not consider personal images
+ check vocabulary settings in admin
+ personal gallery has exchanged settings
+ paging & browser bar
- integrate history
+ t() everything
- blocks
- hashing of files
- change die() in trigger_error()?
- disable convert: no convert -> file upload to upload thumb
- do we really enforce kb, size and number of personal images limit? shouldn't these checks be at node save too?
- support gd
- recheck personal limit

***
Moshe:
DATABASE
+ the database field 'previewpath' might be called 'preview_path' for
consistency with other fields in the table

ADMIN
+ the best english is "DOES NOT EXIST" (no 's' at the end)
+ the links to 'settings and filters' should append a #image to the end.
also this page is now called Site Configuration. Lastly, you should probably
link to the 'Settings' page in the row of Admin links where you currently
have directory upload, gallery admin, etc.
+ Admin messages like "Error: you must assign a vocabulary to navigation
before. Fix in settings and filters" will look a bit prettier if you wrap
the text inside of the status() function call.
- you might want to ask the admin to assign a vocabulary to *image* in Taxonomy AND to assign a
vocabulary for navigation in Site Configuration.
- If only 1 vocabulary is assigned to image.module, then the Admin should
have to designate a vocab for navigation. This is especially true because
when I visited Site Configuration, it appeared to already have selected the
navigation vocabulary for me. I know why this happens, but normal Admins
will not.
- We may want to suggest a basic vocabulary for getting started with this
module. Or optionally create a default vocabulary for the Admin. This step
is a bit bewildering without much guidance. I suppose this could be fixed
with proper Help.
- I'm a bit unsure what you mean when you say that the Directory Upload must
be 'visible from the web server' I tried to specify a full path
'c:\data\photos' and a virtual directory in IIS called 'photos' but neither
both got 'not a directory' error messages. I did succeed when I designated a
subdirectory of my drupal install ... perhaps this is a good point to detail
in the Help.
+ I suggest changing the name of the permission to 'can have personal image
gallery' instead of 'photo'
+ may i suggest that you add a CSS class statement for formatting error
messages. I did this a while ago in the user.module. Polder.theme enables
you to stylize these messages, and hopefully other themes will follow. So an
error message should be formatted as <div style=\"color: red;\"
class=\"error\">. This statement keeps red error messages as a default, but
can be overridden by a theme.
? line 745: message_access() now outputs its own box. don't call it from
within a theme->box.

GENERAL
+ you might want to use the format_plural() function in this message 'There
are 1 images in this album'
- we need to explain the weight concept to end users. how about changing the
compose to read 'Sort thumbnail images by giving a higher number to those
images you want to display last.'
? the compose form asks the user to click on the 'browse' button but the
button actually says 'choose'
+ Admin should optionally disable the fancy editing features. Or perhaps
that should be role based? Seems like the submission process could be too
confusing for some users.
- I'd also like to omit the filename field. Perhaps
we need a simple view and an expert view.
+ The user menu text could be a bit shorter and more consistent by omitting
the 'your' in the text 'view your photo gallery'
+ The user menu link for personal gallery seems to show when personal
gallery is disabled, and not when it is enabled.

MISC
- sure would be nice to offer users a way to add many images at the same
time. See XXX
- many photo sites like Ofoto have a 'slideshow' mode where the images
automatically advance for you using a <meta refresh> tag. user has
forward/back/pause controls as well. I'd love this feature.
- the feature allowing 'personal galleries' could be even better IMO. I
really want users to submit photo albums and not just a photo blog. I guess
this requires personal taxonomies. Does the taxonomy module yet have a
concept of a taxonomy belonging to a person?
- As you mention in NOTES, we do need an overview of personal galleries, at
this overview, i imagine we show galleries by last updated or by user.



